<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Tippanna Bangi | Blog Management</title>
    <meta name="description" content="Admin panel for managing blog posts on Tippanna Bangi's portfolio website.">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Inter Font from Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap">
    
    <!-- Three.js CDN for 3D background -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* General styling for the body and fonts */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A; /* Slate-900 dark background */
        }
        
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1E293B; /* Slate-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; /* Slate-600 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0D9488; /* Teal-600 */
        }
        
        /* Style for the 3D background canvas */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        /* Ensure the main content is on top of the canvas */
        main, header, footer {
            position: relative;
            z-index: 1;
        }
        
        /* Form styling */
        .form-input {
            background-color: #1e293b;
            border: 1px solid #475569;
            color: #f1f5f9;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            border-color: #0D9488;
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }
        .form-textarea {
            min-height: 200px;
            resize: vertical;
        }
        
        /* Login form styling */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Admin panel styling */
        .admin-panel {
            min-height: 100vh;
            padding-top: 2rem;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 antialiased">
    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>

    <!-- Login Form -->
    <div id="login-container" class="login-container">
        <div class="bg-slate-800 rounded-3xl shadow-2xl p-8 w-full max-w-md mx-4">
            <div class="text-center mb-8">
                <img src="https://i.ibb.co/pvwhFQcK/IMG-20250808-012023.png" alt="Tippanna Bangi Logo" class="w-16 h-16 rounded-full border-2 border-teal-400 object-cover mx-auto mb-4">
                <h1 class="text-2xl font-bold text-white">Admin Login</h1>
                <p class="text-slate-400 mt-2">Access your blog management panel</p>
            </div>
            
            <form id="login-form" class="space-y-6">
                <div>
                    <label for="username" class="block text-sm font-medium text-slate-300 mb-2">Username</label>
                    <input type="text" id="username" name="username" required 
                           class="form-input w-full px-4 py-3 rounded-lg focus:outline-none">
                </div>
                
                <div>
                    <label for="password" class="block text-sm font-medium text-slate-300 mb-2">Password</label>
                    <input type="password" id="password" name="password" required 
                           class="form-input w-full px-4 py-3 rounded-lg focus:outline-none">
                </div>
                
                <button type="submit" 
                        class="w-full bg-teal-500 text-slate-900 font-bold py-3 px-6 rounded-lg hover:bg-teal-400 transition-colors duration-300 transform hover:scale-105">
                    Login
                </button>
            </form>
            
            <div id="login-error" class="hidden mt-4 p-4 bg-red-900/50 border border-red-500 rounded-lg">
                <p class="text-red-300 text-sm">Invalid username or password. Please try again.</p>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="admin-panel hidden">
        <!-- Header -->
        <header class="bg-slate-800/80 backdrop-blur-md shadow-lg">
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <img src="https://i.ibb.co/pvwhFQcK/IMG-20250808-012023.png" alt="Tippanna Bangi Logo" class="w-10 h-10 rounded-full border-2 border-teal-400 object-cover">
                    <div>
                        <h1 class="text-xl font-bold text-white">Blog Admin Panel</h1>
                        <p class="text-sm text-slate-400">Manage your blog posts</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="blog.html" class="text-slate-300 hover:text-teal-400 transition-colors">View Blog</a>
                    <a href="index.html" class="text-slate-300 hover:text-teal-400 transition-colors">Portfolio</a>
                    <button id="logout-btn" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                        Logout
                    </button>
                </div>
            </nav>
        </header>

        <main class="container mx-auto px-6 py-8">
            <!-- Tabs -->
            <div class="flex space-x-1 bg-slate-800 p-1 rounded-lg mb-8 w-fit">
                <button id="create-tab" class="px-6 py-2 rounded-md text-sm font-medium bg-teal-500 text-slate-900">
                    Create Post
                </button>
                <button id="manage-tab" class="px-6 py-2 rounded-md text-sm font-medium text-slate-300 hover:text-white hover:bg-slate-700">
                    Manage Posts
                </button>
            </div>

            <!-- Create Post Tab -->
            <div id="create-post-section" class="space-y-8">
                <div class="bg-slate-800 rounded-2xl shadow-xl p-8">
                    <h2 class="text-2xl font-bold text-white mb-6">Create New Blog Post</h2>
                    
                    <form id="blog-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="post-title" class="block text-sm font-medium text-slate-300 mb-2">Title *</label>
                                <input type="text" id="post-title" name="title" required 
                                       class="form-input w-full px-4 py-3 rounded-lg focus:outline-none"
                                       placeholder="Enter blog post title">
                            </div>
                            
                            <div>
                                <label for="post-category" class="block text-sm font-medium text-slate-300 mb-2">Category</label>
                                <select id="post-category" name="category" 
                                        class="form-input w-full px-4 py-3 rounded-lg focus:outline-none">
                                    <option value="General">General</option>
                                    <option value="Technology">Technology</option>
                                    <option value="Career">Career</option>
                                    <option value="Learning">Learning</option>
                                    <option value="Personal">Personal</option>
                                    <option value="Deshpande Skilling">Deshpande Skilling</option>
                                    <option value="Ramdurg">Ramdurg</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label for="post-description" class="block text-sm font-medium text-slate-300 mb-2">Description *</label>
                            <textarea id="post-description" name="description" required 
                                      class="form-input form-textarea w-full px-4 py-3 rounded-lg focus:outline-none"
                                      placeholder="Brief description of the blog post"></textarea>
                        </div>

                        <!-- Cover Image -->
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">Cover Image</label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
                                <div>
                                    <input type="file" id="cover-image" accept="image/*" class="form-input w-full px-4 py-2 rounded-lg focus:outline-none">
                                    <p class="text-xs text-slate-400 mt-2">Recommended ratio ~16:9. Used on blog list and post header.</p>
                                </div>
                                <div>
                                    <input type="text" id="cover-alt" class="form-input w-full px-4 py-3 rounded-lg focus:outline-none" placeholder="Cover image alt text (for SEO)">
                                </div>
                            </div>
                            <div id="cover-preview" class="mt-4 hidden">
                                <img id="cover-preview-img" src="" alt="Cover preview" class="max-h-48 rounded-lg border border-slate-700 object-cover">
                            </div>
                        </div>
                        
                        <div>
                            <label for="post-content" class="block text-sm font-medium text-slate-300 mb-2">Content *</label>
                            <textarea id="post-content" name="content" required 
                                      class="form-input form-textarea w-full px-4 py-3 rounded-lg focus:outline-none"
                                      placeholder="Write your blog post content here. You can use HTML tags for formatting."></textarea>
                            <p class="text-sm text-slate-400 mt-2">
                                You can use HTML tags for formatting. Examples: &lt;h2&gt;Heading&lt;/h2&gt;, &lt;p&gt;Paragraph&lt;/p&gt;, &lt;ul&gt;&lt;li&gt;List item&lt;/li&gt;&lt;/ul&gt;
                            </p>
                            <div class="mt-3 flex items-center space-x-3">
                                <button type="button" id="insert-image-btn" 
                                        class="px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors">
                                    Insert Image
                                </button>
                                <input type="file" id="inline-image-input" accept="image/*" class="hidden">
                                <span class="text-xs text-slate-400">Uploads image and inserts <img> tag at cursor.</span>
                            </div>
                        </div>
                        
                        <div class="flex justify-end space-x-4">
                            <button type="button" id="preview-btn" 
                                    class="px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors">
                                Preview
                            </button>
                            <button type="submit" 
                                    class="px-8 py-3 bg-teal-500 text-slate-900 font-bold rounded-lg hover:bg-teal-400 transition-colors">
                                Publish Post
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Manage Posts Tab -->
            <div id="manage-posts-section" class="hidden">
                <div class="bg-slate-800 rounded-2xl shadow-xl p-8">
                    <h2 class="text-2xl font-bold text-white mb-6">Manage Blog Posts</h2>
                    
                    <div id="posts-list" class="space-y-4">
                        <!-- Posts will be loaded here -->
                    </div>
                    
                    <div id="no-posts-message" class="hidden text-center py-12">
                        <p class="text-slate-400">No blog posts found.</p>
                    </div>
                </div>
            </div>

            <!-- Preview Modal -->
            <div id="preview-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
                <div class="bg-slate-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-slate-700 flex justify-between items-center">
                        <h3 class="text-xl font-bold text-white">Post Preview</h3>
                        <button id="close-preview" class="text-slate-400 hover:text-white">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="p-6">
                        <div id="preview-content" class="prose prose-invert max-w-none">
                            <!-- Preview content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Success/Error Messages -->
    <div id="message-container" class="fixed top-4 right-4 z-50 space-y-2">
        <!-- Messages will be displayed here -->
    </div>

    <script>
        // Admin credentials (in a real app, this would be server-side)
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: 'tippanna2025'
        };

        // Check if user is logged in
        function checkAuth() {
            const isLoggedIn = localStorage.getItem('admin_logged_in') === 'true';
            if (isLoggedIn) {
                showAdminPanel();
            } else {
                showLoginForm();
            }
        }

        // Show login form
        function showLoginForm() {
            document.getElementById('login-container').classList.remove('hidden');
            document.getElementById('admin-panel').classList.add('hidden');
        }

        // Show admin panel
        function showAdminPanel() {
            document.getElementById('login-container').classList.add('hidden');
            document.getElementById('admin-panel').classList.remove('hidden');
            loadPosts();
        }

        // Handle login
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('login-error');
            
            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                localStorage.setItem('admin_logged_in', 'true');
                showAdminPanel();
                errorDiv.classList.add('hidden');
            } else {
                errorDiv.classList.remove('hidden');
            }
        });

        // Handle logout
        document.getElementById('logout-btn').addEventListener('click', function() {
            localStorage.removeItem('admin_logged_in');
            showLoginForm();
        });

        // Tab switching
        document.getElementById('create-tab').addEventListener('click', function() {
            document.getElementById('create-post-section').classList.remove('hidden');
            document.getElementById('manage-posts-section').classList.add('hidden');
            this.classList.add('bg-teal-500', 'text-slate-900');
            this.classList.remove('text-slate-300', 'hover:text-white', 'hover:bg-slate-700');
            document.getElementById('manage-tab').classList.remove('bg-teal-500', 'text-slate-900');
            document.getElementById('manage-tab').classList.add('text-slate-300', 'hover:text-white', 'hover:bg-slate-700');
        });

        document.getElementById('manage-tab').addEventListener('click', function() {
            document.getElementById('manage-posts-section').classList.remove('hidden');
            document.getElementById('create-post-section').classList.add('hidden');
            this.classList.add('bg-teal-500', 'text-slate-900');
            this.classList.remove('text-slate-300', 'hover:text-white', 'hover:bg-slate-700');
            document.getElementById('create-tab').classList.remove('bg-teal-500', 'text-slate-900');
            document.getElementById('create-tab').classList.add('text-slate-300', 'hover:text-white', 'hover:bg-slate-700');
            loadPosts();
        });

        // Handle blog form submission
        document.getElementById('blog-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const postData = {
                id: generateId(),
                title: formData.get('title'),
                description: formData.get('description'),
                content: formData.get('content'),
                category: formData.get('category'),
                date: new Date().toISOString(),
                coverImage: currentCoverImage
            };
            
            savePost(postData);
            this.reset();
            showMessage('Blog post published successfully!', 'success');
        });

        // Preview functionality
        document.getElementById('preview-btn').addEventListener('click', function() {
            const formData = new FormData(document.getElementById('blog-form'));
            const title = formData.get('title');
            const description = formData.get('description');
            const content = formData.get('content');
            const category = formData.get('category');
            
            if (!title || !description || !content) {
                showMessage('Please fill in all required fields before previewing.', 'error');
                return;
            }
            
            const coverHtml = currentCoverImage && currentCoverImage.src ? `
                <div class="mb-6">
                    <img src="${currentCoverImage.src}" alt="${currentCoverImage.alt || 'Cover image'}" class="w-full max-h-96 object-cover rounded-xl border border-slate-700" />
                </div>
            ` : '';

            const previewContent = `
                <div class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-sm text-teal-400 font-medium bg-slate-700 px-3 py-1 rounded-full">${category}</span>
                        <time class="text-sm text-slate-400">${new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</time>
                    </div>
                    <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">${title}</h1>
                    <p class="text-lg text-slate-300 mb-6">${description}</p>
                </div>
                ${coverHtml}
                <div class="blog-content">${content}</div>
            `;
            
            document.getElementById('preview-content').innerHTML = previewContent;
            document.getElementById('preview-modal').classList.remove('hidden');
        });

        // Close preview modal
        document.getElementById('close-preview').addEventListener('click', function() {
            document.getElementById('preview-modal').classList.add('hidden');
        });

        // Close preview modal on backdrop click
        document.getElementById('preview-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
            }
        });

        // Generate unique ID
        function generateId() {
            return 'post_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // State for cover image
        let currentCoverImage = null;

        // Handle cover image upload
        document.getElementById('cover-image').addEventListener('change', function(e) {
            const file = e.target.files && e.target.files[0];
            const alt = document.getElementById('cover-alt').value || '';
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(loadEvt) {
                currentCoverImage = { src: loadEvt.target.result, alt };
                const preview = document.getElementById('cover-preview');
                const img = document.getElementById('cover-preview-img');
                img.src = currentCoverImage.src;
                img.alt = currentCoverImage.alt || 'Cover image preview';
                preview.classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        });

        // Keep alt text in sync
        document.getElementById('cover-alt').addEventListener('input', function(e) {
            if (currentCoverImage) {
                currentCoverImage.alt = e.target.value || '';
                document.getElementById('cover-preview-img').alt = currentCoverImage.alt || 'Cover image preview';
            }
        });

        // Insert inline image into content at cursor
        document.getElementById('insert-image-btn').addEventListener('click', function() {
            document.getElementById('inline-image-input').click();
        });

        document.getElementById('inline-image-input').addEventListener('change', function(e) {
            const file = e.target.files && e.target.files[0];
            if (!file) return;
            const alt = prompt('Enter alt text for the image (for SEO/accessibility):', '') || '';
            const reader = new FileReader();
            reader.onload = function(loadEvt) {
                const dataUrl = loadEvt.target.result;
                const textarea = document.getElementById('post-content');
                const insertHtml = `<img src="${dataUrl}" alt="${alt}">`;
                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const before = textarea.value.substring(0, start);
                const after = textarea.value.substring(end);
                textarea.value = before + insertHtml + after;
                // Move cursor after inserted HTML
                const cursorPos = (before + insertHtml).length;
                textarea.selectionStart = textarea.selectionEnd = cursorPos;
                textarea.focus();
                // reset input
                e.target.value = '';
            };
            reader.readAsDataURL(file);
        });

        // Save post to localStorage (in a real app, this would be server-side)
        function savePost(postData) {
            let posts = JSON.parse(localStorage.getItem('blog_posts') || '[]');
            posts.push(postData);
            localStorage.setItem('blog_posts', JSON.stringify(posts));
            
            // Also try to save to a JSON file (this won't work in browser, but shows the structure)
            // In a real implementation, you'd send this to a server endpoint
            console.log('Post saved to localStorage:', postData);
        }

        // Load posts from localStorage
        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem('blog_posts') || '[]');
            const postsList = document.getElementById('posts-list');
            const noPostsMessage = document.getElementById('no-posts-message');
            
            postsList.innerHTML = '';
            
            if (posts.length === 0) {
                noPostsMessage.classList.remove('hidden');
                return;
            }
            
            noPostsMessage.classList.add('hidden');
            
            // Sort posts by date (newest first)
            posts.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            posts.forEach(post => {
                const postElement = createPostElement(post);
                postsList.appendChild(postElement);
            });
        }

        // Create post element for management
        function createPostElement(post) {
            const div = document.createElement('div');
            div.className = 'bg-slate-700 rounded-lg p-4 flex items-center justify-between';
            
            const date = new Date(post.date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
            
            div.innerHTML = `
                <div class="flex-1">
                    <h3 class="text-lg font-semibold text-white mb-1">${post.title}</h3>
                    <p class="text-sm text-slate-400 mb-2">${post.description}</p>
                    <div class="flex items-center space-x-4 text-xs text-slate-500">
                        <span>${date}</span>
                        <span>â€¢</span>
                        <span>${post.category}</span>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <a href="post.html?id=${post.id}" target="_blank" 
                       class="px-3 py-1 bg-teal-600 text-white text-sm rounded hover:bg-teal-700 transition-colors">
                        View
                    </a>
                    <button onclick="deletePost('${post.id}')" 
                            class="px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors">
                        Delete
                    </button>
                </div>
            `;
            
            return div;
        }

        // Delete post
        function deletePost(postId) {
            if (confirm('Are you sure you want to delete this post?')) {
                let posts = JSON.parse(localStorage.getItem('blog_posts') || '[]');
                posts = posts.filter(post => post.id !== postId);
                localStorage.setItem('blog_posts', JSON.stringify(posts));
                loadPosts();
                showMessage('Post deleted successfully!', 'success');
            }
        }

        // Show message
        function showMessage(message, type) {
            const container = document.getElementById('message-container');
            const messageDiv = document.createElement('div');
            
            const bgColor = type === 'success' ? 'bg-green-600' : 'bg-red-600';
            const textColor = 'text-white';
            
            messageDiv.className = `${bgColor} ${textColor} px-4 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full`;
            messageDiv.textContent = message;
            
            container.appendChild(messageDiv);
            
            // Animate in
            setTimeout(() => {
                messageDiv.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                messageDiv.classList.add('translate-x-full');
                setTimeout(() => {
                    container.removeChild(messageDiv);
                }, 300);
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
        });

        // Three.js 3D Background Animation
        let scene, camera, renderer, particles;
        let mouseX = 0, mouseY = 0;
        let windowHalfX = window.innerWidth / 2;
        let windowHalfY = window.innerHeight / 2;

        function init() {
            const canvas = document.getElementById('bg-canvas');
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Create a field of particles
            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            const particleCount = 2500;
            const starColor = new THREE.Color(0x0D9488); // Teal color

            for (let i = 0; i < particleCount; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                vertices.push(x, y, z);
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

            const material = new THREE.PointsMaterial({
                color: starColor,
                size: 2.5,
                transparent: true,
                opacity: 0.7
            });

            particles = new THREE.Points(geometry, material);
            scene.add(particles);

            camera.position.z = 5;

            document.addEventListener('mousemove', onDocumentMouseMove, false);
            window.addEventListener('resize', onWindowResize, false);
        }

        function onWindowResize() {
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        }

        function animate() {
            requestAnimationFrame(animate);

            // Animate particles
            const positions = particles.geometry.attributes.position.array;
            for (let i = 0; i < positions.length; i += 3) {
                positions[i + 2] += 1; // Move particles towards the camera
                if (positions[i + 2] > camera.position.z) {
                    // Reset particle to far away when it passes the camera
                    positions[i] = (Math.random() - 0.5) * 2000;
                    positions[i + 1] = (Math.random() - 0.5) * 2000;
                    positions[i + 2] = -2000;
                }
            }
            particles.geometry.attributes.position.needsUpdate = true;

            // Subtle camera movement based on mouse position
            camera.position.x += (mouseX / 2000 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY / 2000 - camera.position.y) * 0.05;
            camera.lookAt(scene.position);

            renderer.render(scene, camera);
        }

        window.onload = function() {
            init();
            animate();
        };
    </script>
</body>
</html>
